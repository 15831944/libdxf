<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<book>
  <bookinfo>
    <title>DXF Reference R14.</title>

    <author>
      <firstname/>

      <surname/>

      <affiliation>
        <orgname>Autodesk Inc.</orgname>
      </affiliation>
    </author>

    <pubdate>.</pubdate>
  </bookinfo>

  <chapter>
    <title>DXF Reference.</title>

    <section>
      <title>Overview.</title>

      <para>The information in this document is identical to that found in
      appendixes B and C of the AutoCAD Customization Guide.</para>

      <para>Any updates to this document will be available from our Web site
      at http://www.autodesk.com/techpubs/autocad/dxf/.</para>

      <para>Or you can contact us by email at acad_docs@autodesk.com.</para>

      <para>When inquiring about DXF Reference updates, please refer to this
      file's version number.</para>

      <para>The version number of this file is u14.1.04.</para>

      <para>Topics in this file:</para>

      <itemizedlist>
        <listitem>
          <para>Drawing Interchange File Formats.</para>
        </listitem>

        <listitem>
          <para>ASCII DXF File Format.</para>
        </listitem>

        <listitem>
          <para>Binary DXF File Format.</para>
        </listitem>

        <listitem>
          <para>DXB Files.</para>
        </listitem>

        <listitem>
          <para>Slide File Format.</para>
        </listitem>

        <listitem>
          <para>Slide Library File Format.</para>
        </listitem>

        <listitem>
          <para>DXF Group Codes.</para>
        </listitem>

        <listitem>
          <para>General DXF Conventions.</para>
        </listitem>

        <listitem>
          <para>HEADER Section.</para>
        </listitem>

        <listitem>
          <para>CLASSES Section.</para>
        </listitem>

        <listitem>
          <para>TABLES Section.</para>
        </listitem>

        <listitem>
          <para>BLOCKS Section.</para>
        </listitem>

        <listitem>
          <para>ENTITIES Section.</para>
        </listitem>

        <listitem>
          <para>OBJECTS Section.</para>
        </listitem>

        <listitem>
          <para>Advanced DXF Issues</para>
        </listitem>
      </itemizedlist>
    </section>
  </chapter>

  <chapter>
    <title>Drawing Interchange File Formats.</title>

    <section>
      <title>Overview.</title>

      <para>AutoCAD can be used as a complete drawing editor.</para>

      <para>However, in some applications, other programs must examine AutoCAD
      drawings or generate drawings to be viewed, modified, or plotted with
      AutoCAD.</para>

      <para>Five types of file formats for importing and exporting drawing
      data are described in this appendix.</para>

      <para>Drawing Interchange Format (DXF) files enable the interchange of
      drawings between AutoCAD and other programs.</para>

      <para>DXF files can be either ASCII or binary formats.</para>

      <para>Because ASCII DXF files are more common than the binary format,
      this chapter uses the term DXF file when referring to ASCII DXF files
      and the term binary DXF files when referring to the binary
      format.</para>

      <para>Both ASCII and binary DXF files contain a complete description of
      the AutoCAD drawing.</para>

      <para>Because much of the data in an AutoCAD drawing does not have an
      equivalent object type in other programs, the Drawing Interchange Binary
      (DXB) file format is provided, which creates a simpler geometric
      description of the drawing.</para>

      <para>This appendix also presents the Slide file format and the Slide
      Library file format.</para>

      <para>Topics in this chapter:</para>

      <itemizedlist>
        <listitem>
          <para>ASCII DXF File Format.</para>
        </listitem>

        <listitem>
          <para>Binary DXF File Format.</para>
        </listitem>

        <listitem>
          <para>DXB Files.</para>
        </listitem>

        <listitem>
          <para>Slide File Format.</para>
        </listitem>

        <listitem>
          <para>Slide Library File Format.</para>
        </listitem>
      </itemizedlist>
    </section>

    <section>
      <title>ASCII DXF File Format.</title>

      <para>This section describes the format of ASCII DXF files.</para>

      <para>It contains information that is needed only if you write your own
      programs to process DXF files or work with entity information obtained
      by AutoLISP and ARX applications.</para>

      <para>Topics in this section:</para>

      <itemizedlist>
        <listitem>
          <para>General File Structure.</para>
        </listitem>

        <listitem>
          <para>Symbol Table Example.</para>
        </listitem>

        <listitem>
          <para>Writing DXF Interface Programs.</para>
        </listitem>
      </itemizedlist>

      <section>
        <title>General File Structure.</title>

        <para>Essentially a DXF file is composed of pairs of codes and
        associated values.</para>

        <para>The codes, known as group codes, indicate the type of value that
        follows.</para>

        <para>Using these group code and value pairs, a DXF file is organized
        into sections, which are composed of records, which in turn are
        composed of a group code and a data item.</para>

        <para>Each group code and value are on their own line in the DXF
        file.</para>

        <para>Each section starts with a group code 0 followed by the string,
        SECTION.</para>

        <para>This is followed by a group code 2 and a string indicating the
        name of the section (for example, HEADER).</para>

        <para>Each section is composed of group codes and values that define
        its elements.</para>

        <para>A section ends with a 0 followed by the string ENDSEC.</para>

        <para>It may be helpful to produce a DXF file from a small drawing,
        print it out, and refer to it while reading the information presented
        next.</para>

        <para>Topics in this section:</para>

        <itemizedlist>
          <listitem>
            <para>DXF File Structure.</para>
          </listitem>

          <listitem>
            <para>Group Codes.</para>
          </listitem>
        </itemizedlist>

        <section>
          <title>DXF File Structure.</title>

          <para>The overall organization of a DXF file is as follows:</para>

          <itemizedlist>
            <listitem>
              <para>HEADER section.</para>

              <para>General information about the drawing is found in this
              section.</para>

              <para>It consists of an AutoCAD database version number and a
              number of system variables.</para>

              <para>Each parameter contains a variable name and its associated
              value.</para>
            </listitem>

            <listitem>
              <para>CLASSES section.</para>

              <para>Holds the information for application-defined classes,
              whose instances appear in the BLOCKS, ENTITIES, and OBJECTS
              sections of the database.</para>

              <para>A class definition is permanently fixed in class
              hierarchy.</para>
            </listitem>

            <listitem>
              <para>TABLES section.</para>

              <para>This section contains definitions for the following symbol
              tables.</para>

              <itemizedlist>
                <listitem>
                  <para>APPID (application identification table).</para>
                </listitem>

                <listitem>
                  <para>BLOCK_RECORD (block reference table).</para>
                </listitem>

                <listitem>
                  <para>DIMSTYLE (dimension style table).</para>
                </listitem>

                <listitem>
                  <para>LAYER (layer table).</para>
                </listitem>

                <listitem>
                  <para>LTYPE (linetype table).</para>
                </listitem>

                <listitem>
                  <para>STYLE (text style table).</para>
                </listitem>

                <listitem>
                  <para>UCS (User Coordinate System table).</para>
                </listitem>

                <listitem>
                  <para>VIEW (view table).</para>
                </listitem>

                <listitem>
                  <para>VPORT (viewport configuration table).</para>
                </listitem>
              </itemizedlist>
            </listitem>

            <listitem>
              <para>BLOCKS section.</para>

              <para>Contains block definition and drawing entities that make
              up each block reference in the drawing.</para>
            </listitem>

            <listitem>
              <para>ENTITIES section.</para>

              <para>This section contains the graphical objects (entities) in
              the drawing, including block references (insert
              entities).</para>
            </listitem>

            <listitem>
              <para>OBJECTS section.</para>

              <para>Contains the nongraphical objects in the drawing.</para>

              <para>All objects that are not entities or symbol table records
              or symbol tables are stored in this section.</para>

              <para>Examples of entries in the OBJECTS section are
              dictionaries that contain mline styles and groups.</para>
            </listitem>
          </itemizedlist>

          <para>If you use the Entities option of the DXFOUT command, the
          resulting DXF file contains only the ENTITIES section and the EOF
          marker.</para>

          <para>The ENTITIES section contains only the objects you select for
          output.</para>

          <para>If you select an insert entity, the corresponding block
          definition is not included in the output file.</para>
        </section>

        <section>
          <title>Group Codes.</title>

          <para>Group codes and the associated values define a specific aspect
          of an object or entity.</para>

          <para>The line immediately following the group code is the
          associated value.</para>

          <para>This value can be a a string, an integer, or a floating-point
          value, such as the X coordinate of a point.</para>

          <para>The lines following the second line of the group, if any, are
          determined by the group definition and the data associated with the
          group.</para>

          <para>Special group codes are used as file separators, such as
          markers for the beginning and end of sections, tables, and the end
          of the file itself.</para>

          <para>Entities, objects, classes, tables and table entries, and file
          separators are introduced with a 0 group code that is followed by a
          name describing the group.</para>

          <para>The maximum DXF file string length is 256 characters.</para>

          <para>If your AutoCAD drawing contains strings that exceed this
          number, those strings are truncated during DXFOUT.</para>

          <para>DXFIN fails if your DXF file contains strings that exceed this
          number.</para>

          <para><emphasis role="bold">ASCII Control
          Characters.</emphasis></para>

          <para>DXFOUT handles ASCII control characters in text strings by
          expanding the character into a caret (^) followed by the appropriate
          letter.</para>

          <para>For example, an ASCII Control-G (BEL, decimal code 7) is
          output as ^G.</para>

          <para>If the text itself contains a caret character, it is expanded
          to caret, space (^ ).</para>

          <para>DXFIN performs the complementary conversion.</para>
        </section>
      </section>

      <section>
        <title>Symbol Table Example.</title>

        <para>This DXF sequence represents three full objects: the symbol
        table itself plus two entries.</para>

        <table>
          <title>Symbol Table Example.</title>

          <tgroup cols="2">
            <tbody>
              <row>
                <entry>0</entry>

                <entry/>
              </row>

              <row>
                <entry>TABLE</entry>

                <entry><emphasis>It's a table, but what
                kind?</emphasis></entry>
              </row>

              <row>
                <entry>2</entry>

                <entry/>
              </row>

              <row>
                <entry>STYLE</entry>

                <entry><emphasis>This kind. Exception to rule that code 0
                fully defines type.</emphasis></entry>
              </row>

              <row>
                <entry>5</entry>

                <entry/>
              </row>

              <row>
                <entry>1C</entry>

                <entry><emphasis>STYLE table handle; same as for entities and
                other objects.</emphasis></entry>
              </row>

              <row>
                <entry>70</entry>

                <entry/>
              </row>

              <row>
                <entry>3</entry>

                <entry><emphasis>Maximum number of STYLE table records to
                follow (pre-Release 13 field).</emphasis></entry>
              </row>

              <row>
                <entry>1001</entry>

                <entry/>
              </row>

              <row>
                <entry>APP_X</entry>

                <entry><emphasis>APP_X has put xdata on a symbol
                table.</emphasis></entry>
              </row>

              <row>
                <entry>1040</entry>

                <entry/>
              </row>

              <row>
                <entry>42.0</entry>

                <entry><emphasis>Just a single floating-point
                number.</emphasis></entry>
              </row>

              <row>
                <entry>0</entry>

                <entry/>
              </row>

              <row>
                <entry>STYLE</entry>

                <entry><emphasis>Beginning of first element in the STYLE
                symbol table.</emphasis></entry>
              </row>

              <row>
                <entry>5</entry>

                <entry/>
              </row>

              <row>
                <entry>3A</entry>

                <entry><emphasis>The first entry's handle. (DIMSTYLE entries
                will have 105 here).</emphasis></entry>
              </row>

              <row>
                <entry>2</entry>

                <entry/>
              </row>

              <row>
                <entry>ENTRY_1</entry>

                <entry><emphasis>The first entry's text
                name.</emphasis></entry>
              </row>

              <row>
                <entry>70</entry>

                <entry/>
              </row>

              <row>
                <entry>64</entry>

                <entry><emphasis>Standard flag value.</emphasis></entry>
              </row>

              <row>
                <entry>40</entry>

                <entry/>
              </row>

              <row>
                <entry>.4</entry>

                <entry><emphasis>Text height.</emphasis></entry>
              </row>

              <row>
                <entry>41</entry>

                <entry/>
              </row>

              <row>
                <entry>1.0</entry>

                <entry><emphasis>Width scale factor.</emphasis></entry>
              </row>

              <row>
                <entry>50</entry>

                <entry/>
              </row>

              <row>
                <entry>0.0</entry>

                <entry><emphasis>Oblique angle.</emphasis></entry>
              </row>

              <row>
                <entry>71</entry>

                <entry/>
              </row>

              <row>
                <entry>0</entry>

                <entry><emphasis>Text generation flags.</emphasis></entry>
              </row>

              <row>
                <entry>42</entry>

                <entry/>
              </row>

              <row>
                <entry>0.4</entry>

                <entry><emphasis>Last height used.</emphasis></entry>
              </row>

              <row>
                <entry>3</entry>

                <entry/>
              </row>

              <row>
                <entry>BUFONTS.TXT</entry>

                <entry><emphasis>Primary font file name.</emphasis></entry>
              </row>

              <row>
                <entry>0</entry>

                <entry/>
              </row>

              <row>
                <entry>STYLE</entry>

                <entry><emphasis>Second entry begins. No xdata or persistent
                reactors on first entry.</emphasis></entry>
              </row>

              <row>
                <entry>5</entry>

                <entry/>
              </row>

              <row>
                <entry>C2</entry>

                <entry><emphasis>Second entry handle.</emphasis></entry>
              </row>

              <row>
                <entry>2</entry>

                <entry/>
              </row>

              <row>
                <entry>ENTRY_2</entry>

                <entry><emphasis>Second entry text name.</emphasis></entry>
              </row>

              <row>
                <entry>...</entry>

                <entry/>
              </row>

              <row>
                <entry>...</entry>

                <entry><emphasis>Other fields down to group code
                3.</emphasis></entry>
              </row>

              <row>
                <entry>3</entry>

                <entry/>
              </row>

              <row>
                <entry>BUFONTS.TXT</entry>

                <entry><emphasis>Primary font file name and last object
                type--specific group.</emphasis></entry>
              </row>

              <row>
                <entry>102</entry>

                <entry/>
              </row>

              <row>
                <entry>{ACAD_REACTORS</entry>

                <entry><emphasis>This entry has a couple of persistent
                reactors.</emphasis></entry>
              </row>

              <row>
                <entry>330</entry>

                <entry/>
              </row>

              <row>
                <entry>3C2</entry>

                <entry><emphasis>Soft ID to first reactor
                object.</emphasis></entry>
              </row>

              <row>
                <entry>330</entry>

                <entry/>
              </row>

              <row>
                <entry>41B</entry>

                <entry><emphasis>Soft ID to first reactor
                object.</emphasis></entry>
              </row>

              <row>
                <entry>102</entry>

                <entry/>
              </row>

              <row>
                <entry>}</entry>

                <entry><emphasis>Indicates the end of the reactor
                set.</emphasis></entry>
              </row>

              <row>
                <entry>1001</entry>

                <entry/>
              </row>

              <row>
                <entry>APP_1</entry>

                <entry><emphasis>Xdata attached to this
                entry.</emphasis></entry>
              </row>

              <row>
                <entry>1070</entry>

                <entry/>
              </row>

              <row>
                <entry>45</entry>

                <entry/>
              </row>

              <row>
                <entry>1001</entry>

                <entry/>
              </row>

              <row>
                <entry>APP_2</entry>

                <entry/>
              </row>

              <row>
                <entry>1004</entry>

                <entry/>
              </row>

              <row>
                <entry>18A5B3EF2C199A</entry>

                <entry/>
              </row>

              <row>
                <entry>0</entry>

                <entry/>
              </row>

              <row>
                <entry>UCS</entry>

                <entry><emphasis>Start of UCS table (and end of previous
                record and table).</emphasis></entry>
              </row>
            </tbody>
          </tgroup>
        </table>
      </section>

      <section>
        <title>Writing DXF Interface Programs.</title>

        <para>Writing a program that communicates with AutoCAD by means of the
        DXF mechanism appears more difficult than it actually is.</para>

        <para>The DXF format makes it easy to ignore information you don't
        need, while reading the information you do need.</para>

        <para>The following example is a Microsoft BASIC(tm) program that
        reads a DXF file and extracts all the line entities from the drawing
        (ignoring lines that appear inside blocks).</para>

        <para>It displays the endpoints of these lines on the screen.</para>

        <para>This program is an example of how simple a DXF-reading program
        can be.</para>

        <programlisting>1000  REM
1010  REM Extract lines from DXF file
1020  REM
1030  G1% = 0
1040  LINE INPUT "DXF file name: "; A$
1050  OPEN "i", 1, A$ + ".dxf"
1060  REM
1070  REM Ignore until section start encountered
1080  REM
1090  GOSUB 2000
1100  IF G% &lt;&gt; 0 THEN 1090
1110  IF S$ &lt;&gt; "SECTION" THEN 1090
1120  GOSUB 2000
1130  REM
1140  REM Skip unless ENTITIES section
1150  REM
1160  IF S$ &lt;&gt; "ENTITIES" THEN 1090
1170  REM
1180  REM Scan until end of section, processing LINEs
1190  REM
1200  GOSUB 2000
1210  IF G% = 0 AND S$ = "ENDSEC" THEN 2200
1220  IF G% = 0 AND S$ = "LINE" THEN GOSUB 1400 : GOTO 1210
1230  GOTO 1200
1400  REM
1410  REM Accumulate LINE entity groups
1420  REM
1430  GOSUB 2000
1440  IF G% = 10 THEN X1 = X : Y1 = Y : Z1 = Z
1450  IF G% = 11 THEN X2 = X : Y2 = Y : Z2 = Z
1460  IF G% = 0 THEN PRINT "Line from (";X1;",";Y1;",";Z1;") to (";X2;",";Y2;",";Z2;")":RETURN
1470  GOTO 1430
2000  REM
2010  REM Read group code and following value
2020  REM For X coordinates, read Y and possibly Z also
2030  REM
2040  IF G1% &lt; 0 THEN G% = -G1% : G1% = 0 ELSE INPUT #1, G%
2050  IF G% &lt; 10 OR G% = 999 THEN LINE INPUT #1, S$ : RETURN
2060  IF G% &gt;= 38 AND G% &lt;= 49 THEN INPUT #1, V : RETURN
2080  IF G% &gt;= 50 AND G% &lt;= 59 THEN INPUT #1, A : RETURN
2090  IF G% &gt;= 60 AND G% &lt;= 69 THEN INPUT #1, P% : RETURN
2100  IF G% &gt;= 70 AND G% &lt;= 79 THEN INPUT #1, F% : RETURN
2110  IF G% &gt;= 210 AND G% &lt;= 219 THEN 2130
2115  IF G% &gt;= 1000 THEN LINE INPUT #1, T$ : RETURN
2120  IF G% &gt;= 20 THEN PRINT "Invalid group code";G% : STOP
2130  INPUT #1, X
2140  INPUT #1, G1%
2150  IF G1% &lt;&gt; (G%+10) THEN PRINT "Invalid Y coord code";G1% : STOP
2160  INPUT #1, Y
2170  INPUT #1, G1%
2180  IF G1% &lt;&gt; (G%+20) THEN G1% = -G1% ELSE INPUT #1, Z
2190  RETURN
2200  CLOSE 1 </programlisting>

        <para>Writing a program that constructs a DXF file poses different
        problems.</para>

        <para>You must maintain consistency within the drawing, although with
        AutoCAD you can omit many items in a DXF file and still obtain a
        usable drawing.</para>

        <para>The entire HEADER section can be omitted if you don't set header
        variables.</para>

        <para>Any of the tables in the TABLES section can be omitted if you
        don't need to make entries, and the entire TABLES section can be
        dropped if nothing in it is required.</para>

        <para>If you define any linetypes in the LTYPE table, this table must
        appear before the LAYER table.</para>

        <para>If no block definitions are used in the drawing, the BLOCKS
        section can be omitted.</para>

        <para>If present, the BLOCKS section must appear before the ENTITIES
        section.</para>

        <para>Within the ENTITIES section, you can reference layer names even
        though you haven't defined them in the LAYER table.</para>

        <para>Such layers are automatically created with color 7 and the
        CONTINUOUS linetype.</para>

        <para>The EOF item must be present at the end of file.</para>

        <para>The following Microsoft BASIC program constructs a DXF file
        representing a polygon with a specified number of sides, leftmost
        origin point, and side length.</para>

        <para>This program supplies only the ENTITIES section of the DXF file
        and places all entities generated on the default layer 0.</para>

        <para>Because this program doesn't create the drawing header, the
        drawing limits, extents, and current view will be invalid after
        performing a DXFIN on the drawing generated by this program.</para>

        <para>You can do a ZOOM Extents to fill the screen with the drawing
        generated.</para>

        <para>Then adjust the limits manually.</para>

        <programlisting>1000 REM
1010 REM Polygon generator
1020 REM
1030 LINE INPUT "Drawing (DXF) file name: "; A$
1040 OPEN "o", 1, A$ + ".dxf"
1050 PRINT #1, 0
1060 PRINT #1, "SECTION"
1070 PRINT #1, 2
1080 PRINT #1, "ENTITIES"
1090 PI = ATN(1) * 4
1100 INPUT "Number of sides for polygon: "; S%
1110 INPUT "Starting point (X,Y): "; X, Y
1120 INPUT "Polygon side: "; D
1130 A1 = (2 * PI) / S%
1140 A = PI / 2
1150 FOR I% = 1 TO S%
1160 PRINT #1, 0
1170 PRINT #1, "LINE"
1180 PRINT #1, 8
1190 PRINT #1, "0"
1200 PRINT #1, 10
1210 PRINT #1, X
1220 PRINT #1, 20
1230 PRINT #1, Y
1240 PRINT #1, 30
1250 PRINT #1, 0.0
1260 NX = D * COS(A) + X
1270 NY = D * SIN(A) + Y
1280 PRINT #1, 11
1290 PRINT #1, NX
1300 PRINT #1, 21
1310 PRINT #1, NY
1320 PRINT #1, 31
1330 PRINT #1, 0.0
1340 X = NX
1350 Y = NY
1360 A = A + A1
1370 NEXT I%
1380 PRINT #1, 0
1390 PRINT #1, "ENDSEC"
1400 PRINT #1, 0
1410 PRINT #1, "EOF"
1420 CLOSE 1</programlisting>

        <para>As long as a properly formatted item appears on the line on
        which the data is expected, DXFIN accepts it.</para>

        <para>(Of course, string items should not have leading spaces unless
        these are intended to be part of the string).</para>

        <para>This program takes advantage of this flexibility in input format
        and does not generate a file exactly like one generated by
        AutoCAD.</para>

        <para>In the case of an error in using DXFIN TO load, AutoCAD reports
        the error with a message indicating the nature of the error and the
        last line processed in the dxf file before the error was
        detected.</para>

        <para>This may not be the line on which the error occurred, especially
        in the case of errors such as the omission of required groups.</para>
      </section>
    </section>

    <section>
      <title>Binary DXF File Format.</title>

      <para>The ASCII DXF file format is a complete representation of an
      AutoCAD drawing in an ASCII text form, and is easily processed by other
      programs.</para>

      <para>In addition, AutoCAD can produce or read a binary form of the full
      DXF file and accept limited input in another binary file format.</para>

      <para>The DXFOUT command provides a Binary option that writes binary dxf
      files.</para>

      <para>Such a file contains all of the information present in an ASCII
      DXF file but in a more compact form that takes, typically, 25 percent
      less file space and can be read and written more quickly (typically,
      five times faster) by AutoCAD.</para>

      <para>Unlike ASCII dxf files, which entail a trade-off between size and
      floating-point accuracy, binary dxf files preserve all of the accuracy
      in the drawing database.</para>

      <para>(AutoCAD Release 10 was the first version to support this form of
      DXF file; it cannot be read by older versions.)</para>

      <para>A binary DXF file begins with a 22-byte sentinel consisting of the
      following:</para>

      <para>AutoCAD Binary
      DXF&lt;CR&gt;&lt;LF&gt;&lt;SUB&gt;&lt;NULL&gt;</para>

      <para>Following the sentinel are pairs (group, value) as in an ASCII DXF
      file but represented in binary form.</para>

      <para>The group code is a single-byte binary value, and the value that
      follows is one of the following:</para>

      <itemizedlist>
        <listitem>
          <para>A 2-byte integer with the least significant byte first and the
          most significant byte last.</para>
        </listitem>

        <listitem>
          <para>An 8-byte IEEE double-precision floating-point number stored
          with the least significant byte first and the most significant byte
          last.</para>
        </listitem>

        <listitem>
          <para>An ASCII string terminated by a 0 (NULL) byte.</para>
        </listitem>
      </itemizedlist>

      <para>The type of the datum following a group is determined from the
      group code by the same rules used in decoding ASCII DXF files.</para>

      <para>Translation of angles to degrees and dates to fractional Julian
      date representation is performed for binary files, as well as for ASCII
      DXF files.</para>

      <para>The comment group, 999, is not used in binary DXF files.</para>

      <para>Extended data group codes are represented in binary DXF as a
      single byte with the value 255, followed by a 2-byte integer value
      containing the actual group code, followed by the actual value.</para>

      <para>Extended data long (group code 1071) values occupy 4 bytes of
      data.</para>

      <para>Extended data binary chunks (group code 1004) are represented as a
      single-byte, unsigned integer length, followed by the specified number
      of bytes of chunk data.</para>

      <para>For example, to transfer an extended data long group, the
      following values would appear, occupying 1, 2, and 4 bytes
      respectively.</para>

      <table>
        <title>Escape group code.</title>

        <tgroup cols="2">
          <tbody>
            <row>
              <entry>255</entry>

              <entry>Escape group code.</entry>
            </row>

            <row>
              <entry>1071</entry>

              <entry>True group code.</entry>
            </row>

            <row>
              <entry>999999</entry>

              <entry>Value for the 1071 group code.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>

      <para>DXFOUT writes binary DXF files with the same file type (.dxf) as
      for ASCII DXF files.</para>

      <para>The DXFIN command automatically recognizes a binary file by means
      of its sentinel string.</para>

      <para>There is no need for you to identify it as a binary file. If DXFIN
      encounters an error in a binary DXF file, it reports the byte address
      within the file where the error was detected.</para>
    </section>

    <section>
      <title>DXB Files.</title>

      <para>The DXF file formats are complete representations of an AutoCAD
      drawing that can be written and read by AutoCAD and other
      programs.</para>

      <para>However, programs executed by means of the external commands
      facility often need to supply simple geometric input to AutoCAD.</para>

      <para>For these purposes, AutoCAD supports another file format, called
      DXB (drawing interchange binary), which is limited in the entities it
      can represent.</para>

      <para>To load a DXB file, enter the DXBIN command:</para>

      <programlisting>dxbin</programlisting>

      <para>When AutoCAD prompts you, respond with the name of the file you
      want to load.</para>

      <para>You do not need to include a .dxb file because the type is
      assumed.</para>

      <para>There is no direct AutoCAD command for writing a DXB file, but the
      ADI "AutoCAD file output formats" plotter driver can write such a
      file.</para>

      <para>If you want to create a DXB file from an AutoCAD drawing,
      configure the "file output formats" plotter and select its "AutoCAD DXB
      file" output option.</para>

      <para>Topics in this section:</para>

      <itemizedlist>
        <listitem>
          <para>The DXB File Format.</para>
        </listitem>
      </itemizedlist>

      <section>
        <title>The DXB File Format.</title>

        <para>This information is for experienced programmers and is subject
        to change without notice.</para>

        <para>The format of a DXB file is as follows:</para>

        <para>Header: "AutoCAD DXB 1.0" CR LF ^Z NUL (19 bytes)</para>

        <para>Data: ...Zero or more data records...</para>

        <para>Terminator: NUL (1 byte)</para>

        <para>Each data record begins with a single byte identifying the
        record type, followed by data items.</para>

        <para>The data items have various forms of representation and
        encoding.</para>

        <para>In the following descriptions of the letter codes, each data
        item is prefixed with a letter and a hyphen.</para>

        <variablelist>
          <varlistentry>
            <term>w-</term>

            <listitem>
              <para>16-bit integer, byte reversed in the standard 80x86 style
              the least significant byte first, and the most significant byte
              second).</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>f-</term>

            <listitem>
              <para>IEEE 64-bit floating-point value stored with LSB first,
              MSB last (as stored by an 80x87).</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>l-</term>

            <listitem>
              <para>32-bit integer with the bytes reversed 80x86 style.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>n-</term>

            <listitem>
              <para>Either a 16-bit integer or a floating-point number,
              depending on the most recent setting of the number mode data
              item.</para>

              <para>The number mode defaults to 0, signifying integers.</para>

              <para>If set to 1, all n- items will be read as floating
              point.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>u-</term>

            <listitem>
              <para>Either a 32-bit integer or a floating-point number,
              depending on the most recent number mode setting.</para>

              <para>If a 32-bit integer, the value is scaled by multiplying it
              by 65,536 (216).</para>

              <para>If a floating-point value, no scaling is applied.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>a-</term>

            <listitem>
              <para>An angle.</para>

              <para>If number mode is integer, this is a 32-bit integer
              representing an angle in units of millionths of a degree (range
              0 to 360,000,000).</para>

              <para>If a floating-point number, it represents degrees.</para>
            </listitem>
          </varlistentry>
        </variablelist>

        <para>In the following table, the lengths include the item-type byte
        and assume that the number mode is set to 0 (integer mode).</para>

        <para>If number mode is floating point, add 6 bytes to the length for
        each n- item present and 4 bytes for each a- or u- item
        present.</para>

        <table>
          <title>Byte length for item types.</title>

          <tgroup cols="4">
            <thead>
              <row>
                <entry>Item type</entry>

                <entry>Code (decimal)</entry>

                <entry>Data items</entry>

                <entry>Length (bytes)</entry>
              </row>
            </thead>

            <tbody>
              <row>
                <entry>Line</entry>

                <entry>1</entry>

                <entry>n-fromx n-fromy n-tox n-toy n-fromx n-fromy n-fromz
                n-tox n-toy n-toz</entry>

                <entry>13</entry>
              </row>

              <row>
                <entry>Point</entry>

                <entry>2</entry>

                <entry>n-x n-y</entry>

                <entry>5</entry>
              </row>

              <row>
                <entry>Circle</entry>

                <entry>3</entry>

                <entry>n-ctrx n-ctry n-rad</entry>

                <entry>7</entry>
              </row>

              <row>
                <entry>Arc</entry>

                <entry>8</entry>

                <entry>n-ctrx n-ctry n-rad a-starta a-enda</entry>

                <entry>19</entry>
              </row>

              <row>
                <entry>Trace</entry>

                <entry>9</entry>

                <entry>n-x1 n-y1 n-x2 n-y2 n-x3 n-y3 n-x4 n-y4</entry>

                <entry>17</entry>
              </row>

              <row>
                <entry>Solid</entry>

                <entry>11</entry>

                <entry>n-x1 n-y1 n-x2 n-y2 n-x3 n-y3 n-x4 n-y4</entry>

                <entry>17</entry>
              </row>

              <row>
                <entry>Seqend</entry>

                <entry>17</entry>

                <entry>(none)</entry>

                <entry>1</entry>
              </row>

              <row>
                <entry>Polyline</entry>

                <entry>19</entry>

                <entry>w-closureflag</entry>

                <entry>3</entry>
              </row>

              <row>
                <entry>Vertex</entry>

                <entry>20</entry>

                <entry>n-x n-y</entry>

                <entry>5</entry>
              </row>

              <row>
                <entry>3Dface</entry>

                <entry>22</entry>

                <entry>n-x1 n-y1 n-z1 n-x2 n-y2 n-z2 n-x3 n-y3 n-z3 n-x4 n-y4
                n-z4</entry>

                <entry>25</entry>
              </row>

              <row>
                <entry>Scale factor</entry>

                <entry>128</entry>

                <entry>f-scalefac</entry>

                <entry>9</entry>
              </row>

              <row>
                <entry>New layer</entry>

                <entry>129</entry>

                <entry>"layername" NUL</entry>

                <entry>layername length + 2</entry>
              </row>

              <row>
                <entry>Line extension</entry>

                <entry>130</entry>

                <entry>n-tox n-toy</entry>

                <entry>5</entry>
              </row>

              <row>
                <entry>Trace extension</entry>

                <entry>131</entry>

                <entry>n-x3 n-y3 n-x4 n-y4</entry>

                <entry>9</entry>
              </row>

              <row>
                <entry>Block base</entry>

                <entry>132</entry>

                <entry>n-bx n-by</entry>

                <entry>5</entry>
              </row>

              <row>
                <entry>Bulge</entry>

                <entry>133</entry>

                <entry>u-2h/d</entry>

                <entry>5</entry>
              </row>

              <row>
                <entry>Width</entry>

                <entry>134</entry>

                <entry>n-startw n-endw</entry>

                <entry>5</entry>
              </row>
            </tbody>
          </tgroup>
        </table>

        <para>The line extension item extends the last line or line extension
        from its To point to a new To point.</para>

        <para>The trace extension item extends the last trace solid, or trace
        extension from its x3,y3-x4,y4 ending line to a new x3,y3--x4,y4
        line.</para>

        <para>The scale factor is a floating-point value by which all integer
        coordinates are multiplied to obtain the floating-point coordinates
        used by the entities.</para>

        <para>The initial scale factor when a file is read is 1.0.</para>

        <para>The new layer item creates a layer if none exists, giving the
        new layer the same defaults as the LAYER New command, and sets that
        layer as the current layer for subsequent entities.</para>

        <para>At the end of the DXB file load, the layer in effect before the
        command is restored.</para>

        <para>The block base item specifies the base (origin) point of a
        created block.</para>

        <para>The block base must be defined before the first entity record is
        encountered.</para>

        <para>If DXB does not define a block, this specification is
        ignored.</para>

        <para>A polyline consists of straight segments of fixed width
        connecting the vertices, except as overridden by the bulge and width
        items.</para>

        <para>The closure flag should be 0 or 1; if it is 1, there is an
        implicit segment from the last vertex (immediately before the Seqend)
        to the first vertex.</para>

        <para>A bulge item, encountered between two vertex items (or after the
        last vertex of a closed polyline), indicates that the two vertices are
        connected by an arc rather by than a straight segment.</para>

        <para>If the distance between the vertices has length d, and the
        perpendicular distance from the midpoint of that segment to the arc is
        h, then the magnitude of the bulge is (2 * h / d).</para>

        <para>The sign is negative if the arc from the first vertex to the
        second is clockwise.</para>

        <para>A semicircle thus has a bulge of 1 (or -1).</para>

        <para>If the number mode is 0 (integer), bulge items are scaled by 2
        16.</para>

        <para>If the number mode has been set to floating point, then the
        floating-point value supplied is 2*h/d (not scaled).</para>

        <para>The width item indicates the starting and ending widths of the
        segment (straight or curved) connecting two vertices.</para>

        <para>This width stays in effect until the next width item or the
        seqend.</para>

        <para>If there is a width item between the polyline item and the first
        vertex, it is stored as a default width for the polyline.</para>

        <para>This saves considerable database space if the polyline has
        several segments of this width.</para>

        <para>The number mode item controls the mode of items with types given
        in the preceding table as n-, a-, or u-.</para>

        <para>If the value supplied is 0, these values will be integers;
        otherwise, they are floating point.</para>

        <para>To remember the last to-point, lines share the same cells, so do
        not mix extension groups for the two entities without an initial group
        before the extension.</para>

        <para>There is no extension group for 3D faces, because there is no
        obvious edge to extend from.</para>

        <para>The new color group specifies the color for subsequent entities
        in the DXB file.</para>

        <para>The w-colornum word argument is in the range from 0 to
        256.</para>

        <para>0 means color by block, 1-255 are the standard AutoCAD colors,
        and 256 means color by layer.</para>

        <para>A color outside the range from 0 to 256 sets the color back to
        the current entity color (you can do this deliberately, and it can be
        quite useful).</para>

        <para>The initial entity color of material added by DXBIN is the
        current entity color.</para>

        <para>All points specified in the DXB file are interpreted in terms of
        the current UCS at the time that the DXBIN command is executed.</para>
      </section>
    </section>

    <section>
      <title>Slide File Format.</title>

      <para><note>
          <para>This information is for experienced programmers, and is
          subject to change without notice.</para>
        </note></para>

      <para>AutoCAD slide files are screen images written by the MSLIDE
      command and read by the VSLIDE command.</para>

      <para>This section describes the format of slide files for the benefit
      of developers who wish to incorporate support for AutoCAD slides into
      their programs.</para>

      <para>A slide file consists of a header portion (31 bytes) and one or
      more data records of variable length.</para>

      <para>All coordinates and sizes written to the slide file reflect the
      graphics area of the display device from which the slide was created
      with point (0,0) located at the lower-left corner of the graphics
      area.</para>

      <para>For AutoCAD Release 9 and later, the slide file header consists of
      the following fields:</para>

      <table>
        <title>Slide file header.</title>

        <tgroup cols="3">
          <thead>
            <row>
              <entry>Field</entry>

              <entry>Bytes</entry>

              <entry>Description</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>ID string</entry>

              <entry>17</entry>

              <entry>"AutoCAD Slide" CR LF ^Z NUL</entry>
            </row>

            <row>
              <entry>Type indicator</entry>

              <entry>1</entry>

              <entry>Currently set to 56 (decimal)</entry>
            </row>

            <row>
              <entry>Level indicator</entry>

              <entry>1</entry>

              <entry>Currently set to 2</entry>
            </row>

            <row>
              <entry>High X dot</entry>

              <entry>2</entry>

              <entry>Width of the graphics area: 1, in pixels</entry>
            </row>

            <row>
              <entry>High Y dot</entry>

              <entry>2</entry>

              <entry>Height of the graphics area: 1, in pixels</entry>
            </row>

            <row>
              <entry>Aspect ratio</entry>

              <entry>4</entry>

              <entry>Graphics area aspect ratio (horizontal size/vertical size
              in inches), scaled by 10,000,000. This value is always written
              with the least significant byte first.</entry>
            </row>

            <row>
              <entry>Hardware fill</entry>

              <entry>2</entry>

              <entry>Either 0 or 2 (value is unimportant)</entry>
            </row>

            <row>
              <entry>Test number</entry>

              <entry>2</entry>

              <entry>A number (1234 hex) used to determine whether all 2-byte
              values in the slide were written with the high-order byte first
              (Intel 8086-family CPUs) or the low-order byte first (Motorola
              68000-family CPUs)</entry>
            </row>
          </tbody>
        </tgroup>
      </table>

      <para>Data records follow the header.</para>

      <para>Each data record begins with a 2-byte field whose high-order byte
      is the record type.</para>

      <para>The remainder of the record may be composed of 1-byte or 2-byte
      fields as described in the following table.</para>

      <para>To determine whether the 2-byte fields are written with the
      high-order byte first or the low-order byte first, examine the Test
      number field of the header that is described earlier.<table>
          <title>Slide file data records.</title>

          <tgroup cols="4">
            <thead>
              <row>
                <entry>Record type (hex)</entry>

                <entry>Bytes</entry>

                <entry>Meaning</entry>

                <entry>Description</entry>
              </row>
            </thead>

            <tbody>
              <row>
                <entry>00-7F</entry>

                <entry>8</entry>

                <entry>Vector</entry>

                <entry>The from-X coordinate for an ordinary vector. From-Y,
                to-X, and to-Y follow in that order as 2-byte values. The from
                point is saved as the last point.</entry>
              </row>

              <row>
                <entry>80-FA</entry>

                <entry>--</entry>

                <entry>Undefined</entry>

                <entry>Reserved for future use.</entry>
              </row>

              <row>
                <entry>FB</entry>

                <entry>5</entry>

                <entry>Offset vector</entry>

                <entry>The low-order byte and the following three bytes
                specify the endpoints (from-X, from-Y, to-X, to-Y) of a
                vector, in terms of offsets (-128 to +127) from the saved last
                point. The adjusted from point is saved as the last point for
                use by subsequent vectors.</entry>
              </row>

              <row>
                <entry>FC</entry>

                <entry>2</entry>

                <entry>End of file</entry>

                <entry>The low-order byte is 00.</entry>
              </row>

              <row>
                <entry>FD</entry>

                <entry>6</entry>

                <entry>Solid fill</entry>

                <entry>The low-order byte is always zero. The following two
                2-byte values specify the X and Y coordinates of one vertex of
                a polygon to be solid filled. Three to ten such records occur
                in sequence. A Solid fill record with a negative Y coordinate
                indicates the start or end of such a flood sequence. In the
                start record, the X coordinate indicates the number of vertex
                records to follow.</entry>
              </row>

              <row>
                <entry>FE</entry>

                <entry>3</entry>

                <entry>Common endpoint vector</entry>

                <entry>This is a vector starting at the last point. The
                low-order byte and the following byte specify to-X and to-Y in
                terms of offsets (-128 to +127) from the saved last point. The
                adjusted to point is saved as the last point for use by
                subsequent vectors.</entry>
              </row>

              <row>
                <entry>FF</entry>

                <entry>2</entry>

                <entry>New color</entry>

                <entry>Subsequent vectors are to be drawn using the color
                number indicated by the low-order byte.</entry>
              </row>
            </tbody>
          </tgroup>
        </table></para>

      <para>If a slide contains any vectors at all, a New color record will be
      the first data record.</para>

      <para>The order of the vectors in a slide, and the order of the
      endpoints of those vectors, may vary.</para>

      <para>For example, the following is an annotated hex dump of a simple
      slide file created on an IBM PC/AT with an IBM Enhanced Graphics
      Adapter.</para>

      <para>The slide consists of a white diagonal line from the lower-left
      corner to the upper-right corner of the graphics area, a green vertical
      line near the lower-left corner, and a small red rectangle at the
      lower-left corner.</para>

      <table>
        <title>Example slide file listing.</title>

        <tgroup cols="2">
          <tbody>
            <row>
              <entry>41 75 74 6F 43 41 44 20 53 6C 69 64 65 0D 0A 1A
              00</entry>

              <entry><emphasis>ID string ("AutoCAD Slide" CR LF ^Z
              NUL)</emphasis></entry>
            </row>

            <row>
              <entry>56</entry>

              <entry><emphasis>Type indicator (56)</emphasis></entry>
            </row>

            <row>
              <entry>02</entry>

              <entry><emphasis>Level indicator (02)</emphasis></entry>
            </row>

            <row>
              <entry>3C 02</entry>

              <entry><emphasis>High X dot (572)</emphasis></entry>
            </row>

            <row>
              <entry>24 01</entry>

              <entry><emphasis>High Y dot (292)</emphasis></entry>
            </row>

            <row>
              <entry>0B 80 DF 00</entry>

              <entry><emphasis>Aspect ratio (14,647,307 / 10,000,000 =
              1.46)</emphasis></entry>
            </row>

            <row>
              <entry>02 00</entry>

              <entry><emphasis>Hardware fill (02)</emphasis></entry>
            </row>

            <row>
              <entry>34 12</entry>

              <entry><emphasis>Test number (1234 hex)</emphasis></entry>
            </row>

            <row>
              <entry>07 FF</entry>

              <entry><emphasis>New color (7 = white)</emphasis></entry>
            </row>

            <row>
              <entry>3C 02 24 01 00 00 00 00</entry>

              <entry><emphasis>Vector from 572,292 to 0,0. 572,292 becomes
              "last" point</emphasis></entry>
            </row>

            <row>
              <entry>03 FF</entry>

              <entry><emphasis>New color (3 = green)</emphasis></entry>
            </row>

            <row>
              <entry>0F 00 32 00 0F 00 13 00</entry>

              <entry><emphasis>Vector from 15,50 to 15,19. \x1115,50 becomes
              "last" point</emphasis></entry>
            </row>

            <row>
              <entry>01 FF</entry>

              <entry><emphasis>New color (1 = red)</emphasis></entry>
            </row>

            <row>
              <entry>12 FB E7 12 CE</entry>

              <entry><emphasis>Offset vector from 15+18,50-25 (33,25) to
              15+18,50- 50 (33,0). 33,25 becomes "last"
              point</emphasis></entry>
            </row>

            <row>
              <entry>DF FE 00</entry>

              <entry><emphasis>Common-endpoint vector from 33,25 to 33-33,25+0
              (0,25). 0,25 becomes "last" point</emphasis></entry>
            </row>

            <row>
              <entry>00 FE E7</entry>

              <entry><emphasis>Common-endpoint vector from (0,25) to 0+0,25-25
              (0,0). 0,0 becomes "last" point</emphasis></entry>
            </row>

            <row>
              <entry>21 FE 00 </entry>

              <entry><emphasis>Common-endpoint vector from (0,0) to 0+33,0+0
              (33,0).33,0 becomes "last" point</emphasis></entry>
            </row>

            <row>
              <entry>00 FC</entry>

              <entry>End of file</entry>
            </row>
          </tbody>
        </tgroup>
      </table>

      <para>Topics in this section:</para>

      <itemizedlist>
        <listitem>
          <para>Old Slide Header.</para>
        </listitem>
      </itemizedlist>

      <section>
        <title>Old Slide Header.</title>

        <para>The slide format described in the previous section is produced
        by AutoCAD Release 9 and later, and is portable among all computers
        running AutoCAD Release 9 or later.</para>

        <para>Previous versions of AutoCAD (as well as AutoShade 1.0 and
        AutoSketch 1.02) produce slides with a somewhat different header, as
        shown in the following table.<table>
            <title>Old slide file header.</title>

            <tgroup cols="3">
              <thead>
                <row>
                  <entry>Field</entry>

                  <entry>Bytes</entry>

                  <entry>Description</entry>
                </row>
              </thead>

              <tbody>
                <row>
                  <entry>ID string</entry>

                  <entry>17</entry>

                  <entry>"AutoCAD Slide" CR LF ^Z NUL</entry>
                </row>

                <row>
                  <entry>Type indicator</entry>

                  <entry>1</entry>

                  <entry>56 (decimal)</entry>
                </row>

                <row>
                  <entry>Level indicator</entry>

                  <entry>1</entry>

                  <entry>1 (old format) </entry>
                </row>

                <row>
                  <entry>High X dot</entry>

                  <entry>2</entry>

                  <entry>Width of the graphics area: 1, in pixels</entry>
                </row>

                <row>
                  <entry>High Y dot</entry>

                  <entry>2</entry>

                  <entry>Height of the graphics area: 1, in pixels</entry>
                </row>

                <row>
                  <entry>Aspect ratio</entry>

                  <entry>8</entry>

                  <entry>Graphics area aspect ratio (horizontal size/vertical
                  size in inches), written as a floating-point number</entry>
                </row>

                <row>
                  <entry>Hardware fill</entry>

                  <entry>2</entry>

                  <entry>Either 0 or 2 (value is unimportant)</entry>
                </row>

                <row>
                  <entry>Filler byte</entry>

                  <entry>1</entry>

                  <entry>Unused</entry>
                </row>
              </tbody>
            </tgroup>
          </table></para>

        <para>Note that the old-format header does not contain a Test number
        field.</para>

        <para>The floating-point aspect ratio value and all 2-byte integers
        are written in the native format of the CPU that was used to create
        the file (for 8086-family CPUs, IEEE double-precision, and low-order
        byte first).</para>

        <para>Old-format slide files are not portable across machine types,
        but they can be read by any version of AutoCAD running on the same CPU
        type as the CPU with which the slide was created.</para>
      </section>
    </section>
  </chapter>
</book>
